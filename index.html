<!DOCTYPE html>
<html>
<head>
    <title>Google Form Kiosk Mode</title>
    <style>
        body {
            text-align: center;
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 0;
        }
        iframe {
            width: 100%;
            height: 90vh;
            border: none;
        }
    </style>
</head>
<body>
    <h2>Merci de remplir ce formulaire</h2>
    <iframe id="googleForm" src="https://docs.google.com/forms/d/e/1FAIpQLSft_T6DZv675g_k4e6VOLF4HjItm-Hbq_E_EXx9btXWWUcP_w/viewform?usp=sharing?embedded=true"></iframe>

    <script>
        function checkFormSubmission() {
            const iframe = document.getElementById("googleForm");

            try {
                // Récupère l'URL actuelle de l'iframe
                let formUrl = iframe.contentWindow.location.href;
                console.log("URL actuelle du formulaire :", formUrl);

                // Détection de la soumission via "formResponse"
                if (formUrl.includes("formResponse")) {
                    console.log("Formulaire soumis, rechargement...");

                    // Recharge l'iframe après 3 secondes
                    setTimeout(() => {
                        iframe.src = iframe.src; // Force le rechargement du formulaire
                    }, 3000);
                }
            } catch (error) {
                console.log("Erreur de détection :", error);
            }
        }

        // Vérifie toutes les 2 secondes si le formulaire a été soumis
        setInterval(checkFormSubmission, 2000);
    </script>
</body>
</html>
